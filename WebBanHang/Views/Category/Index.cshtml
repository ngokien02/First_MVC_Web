@model List<Category>
<partial name="_Notification" />
<div class="row">
	<div class="col-md-6">
		<h2>DANH MỤC THỂ LOẠI</h2>
	</div>
	<div class="col-md-6 text-right">
		<a asp-action="Add" class="btn btn-secondary">
			<i class="bi bi-plus-circle-fill"></i> Thêm mới
		</a>
	</div>
</div>
<table class="table table-bordered table-striped">
	<thead>
		<tr>
			<th>Tên</th>
			<th>STT</th>
			<th>Tùy chọn</th>
		</tr>

	</thead>
	<tbody>
		@foreach (var x in Model)
		{
			<tr>
				<td>@x.Name</td>
				<td>@x.DisplayOrder</td>
				<td>
					<a asp-action="Update" asp-route-id="@x.Id" class="btn btn-primary">
						<i class="bi bi-pencil-square"></i> Sửa
					</a>
					<button Id="@x.Id" class="btn btn-danger btnDelete">
						<i class="bi bi-trash"></i> Xóa
					</button>
				</td>
			</tr>
		}
	</tbody>
</table>

<p id="thongBao" style="font-size: x-large; color:white;"></p>

@section Scripts {
	<script>
		$(document).ready(function () {
			$(".btnDelete").click(function () {
				var id = $(this).attr("Id");
				var _this = $(this);
				Swal.fire({
					title: "Xác nhận xóa",
					text: "Bạn có chắc muốn xóa thể loại này?",
					icon: "warning",
					showCancelButton: true,
					cancelButtonText: "Hủy",
					confirmButtonColor: "#3085d6",
					cancelButtonColor: "#d33",
					confirmButtonText: "Xóa"
				}).then((result) => {
					if (result.isConfirmed) {
						$.post("/Category/DeleteConfirm", { Id: id }, function (data) {
							if (data) {
								var rowDelete = _this.closest("tr");
								rowDelete.remove();
								$('#thongBao').html("Đã xóa thành công 1 thể loại");
							}
							else $('#thongBao').html("Đã có sản phẩm thuộc thể loại này, không thể xóa!");;
						});
					}
				});
			})
		})
	</script>
}